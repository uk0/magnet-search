{{template "layout.html" .}}

{{define "title"}}{{.Title}}{{end}}

{{define "content"}}
<div class="container">
    <div class="search-container">
        <h1>磁力搜索引擎</h1>
        <form action="/search" method="get" class="search-form">
            <input type="text" name="q" placeholder="输入关键词搜索..." required>
            <button type="submit">搜索</button>
        </form>
    </div>

    <div class="categories">
        <h2>分类</h2>
        <div class="category-list">
            {{range $category, $count := .Categories}}
            <a href="/search?category={{$category}}" class="category-item">
                <span class="category-name">{{$category}}</span>
                <span class="category-count">{{$count}}</span>
            </a>
            {{end}}
        </div>
    </div>

    <div class="hot-torrents">
        <h2>热门资源</h2>
        {{if .HotTorrents}}
        <div class="torrent-list">
            {{range .HotTorrents}}
            <div class="torrent-item">
                <div class="torrent-title">
                    <a href="{{.MagnetLink}}" title="{{.Title}}">{{.Title}}</a>
                </div>
                <div class="torrent-info">
                    <span class="torrent-category">{{.Category}}</span>
                    <span class="torrent-size">{{formatSize .Size}}</span>
                    <span class="torrent-date">{{formatDate .UploadDate}}</span>
                    <span class="torrent-seeds">做种: {{.Seeds}}</span>
                    <span class="torrent-peers">连接: {{.Peers}}</span>
                    <span class="torrent-heat">热度: {{.Heat}}</span>
                </div>
            </div>
            {{end}}
        </div>
        {{else}}
        <p>暂无热门数据</p>
        {{end}}
    </div>

    <div class="recent-torrents">
        <h2>最新资源</h2>
        {{if .RecentTorrents}}
        <div class="torrent-list">
            {{range .RecentTorrents}}
            <div class="torrent-item">
                <div class="torrent-title">
                    <a href="{{.MagnetLink}}" title="{{.Title}}">{{.Title}}</a>
                </div>
                <div class="torrent-info">
                    <span class="torrent-category">{{.Category}}</span>
                    <span class="torrent-size">{{formatSize .Size}}</span>
                    <span class="torrent-date">{{formatDate .UploadDate}}</span>
                    <span class="torrent-seeds">做种: {{.Seeds}}</span>
                    <span class="torrent-peers">连接: {{.Peers}}</span>
                    <span class="torrent-heat">热度: {{.Heat}}</span>
                </div>
                {{if .Description}}
                <div class="torrent-description">{{.Description}}</div>
                {{end}}
                <div class="torrent-actions">
                    <a href="{{.MagnetLink}}" class="magnet-link" title="复制磁力链接">
                        <i class="icon-magnet"></i> 磁力链接
                    </a>
                    <span class="info-hash">Hash: {{.InfoHash}}</span>
                    <span class="file-count">文件数: {{.FileCount}}</span>
                </div>
            </div>
            {{end}}
        </div>
        {{else}}
        <p>暂无最新数据</p>
        {{end}}
    </div>
</div>
{{end}}